"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}},o=e(t.exports=function(){var e=typeof document<"u"?document.currentScript:null;const t={button:"always",display:"text",text:{copy:"Copy",copied:"Copied!"},plaintextonly:!0,timeout:1e3,style:{copybg:"orange",copiedbg:"green",copycolor:"black",copiedcolor:"white",copyborder:"",copiedborder:"",scale:1,offset:0,radius:0},tooltip:!0,iconsvg:{copy:"",copied:""},cssautoload:!0,csspath:""};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n,r;function i(){if(r)return n;r=1;var e=function(e){return t(e)&&!o(e)};function t(e){return!!e&&"object"==typeof e}function o(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||l(e)}var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function l(e){return e.$$typeof===i}function s(e){return Array.isArray(e)?[]:{}}function c(e,t){return!1!==t.clone&&t.isMergeableObject(e)?h(s(e),e,t):e}function a(e,t,o){return e.concat(t).map((function(e){return c(e,o)}))}function d(e,t){if(!t.customMerge)return h;var o=t.customMerge(e);return"function"==typeof o?o:h}function u(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}function p(e){return Object.keys(e).concat(u(e))}function y(e,t){try{return t in e}catch{return!1}}function f(e,t){return y(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function g(e,t,o){var n={};return o.isMergeableObject(e)&&p(e).forEach((function(t){n[t]=c(e[t],o)})),p(t).forEach((function(r){f(e,r)||(y(e,r)&&o.isMergeableObject(t[r])?n[r]=d(r,o)(e[r],t[r],o):n[r]=c(t[r],o))})),n}function h(t,o,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||e,n.cloneUnlessOtherwiseSpecified=c;var r=Array.isArray(o);return r===Array.isArray(t)?r?n.arrayMerge(t,o,n):g(t,o,n):c(o,n)}return h.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,o){return h(e,o,t)}),{})},n=h}const l=o(i());var s=Object.defineProperty,c=(e,t,o)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t,o)=>c(e,"symbol"!=typeof t?t+"":t,o);const d=()=>{const e=typeof window<"u",t=typeof document<"u",o=e&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let n=!1;try{n=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let r=!1;try{r=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const i=e&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),l=t&&!!document.querySelector('script[type="module"]');let s=!1;try{s=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let c=!1;try{c=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:o,isWebpackHMR:n,isVite:r,isVitePreview:i,hasModuleScripts:l,isModuleBundler:s,isAMD:c,isBundlerEnvironment:n||r||i||l||s||c||o}};class u{constructor(e,t,o){a(this,"defaultConfig"),a(this,"pluginInit"),a(this,"pluginId"),a(this,"mergedConfig",null),a(this,"userConfigData",null),a(this,"data",{}),a(this,"getEnvironmentInfo",(()=>d())),"string"==typeof e?(this.pluginId=e,this.pluginInit=t,this.defaultConfig=o||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const t=this.defaultConfig,o=e.getConfig()[this.pluginId]||{};this.userConfigData=o,this.mergedConfig=l(t,o,{arrayMerge:(e,t)=>t,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:e=>this.init(e),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const p=t=>{const o=document.querySelector(`script[src$="${t}.js"], script[src$="${t}.min.js"], script[src$="${t}.mjs"]`);if(null!=o&&o.src){const e=o.getAttribute("src")||"",t=e.lastIndexOf("/");if(-1!==t)return e.substring(0,t+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("plugin/copycode/copycode.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("plugin/copycode/copycode.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("plugin/copycode/copycode.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("plugin/copycode/copycode.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${t}/`},y="data-css-id",f=(e,t)=>new Promise(((o,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=t,r.setAttribute(y,e);const i=setTimeout((()=>{r.parentNode&&r.parentNode.removeChild(r),n(new Error(`[${e}] Timeout loading CSS from: ${t}`))}),5e3);r.onload=()=>{clearTimeout(i),o()},r.onerror=()=>{clearTimeout(i),r.parentNode&&r.parentNode.removeChild(r),n(new Error(`[${e}] Failed to load CSS from: ${t}`))},document.head.appendChild(r)})),g=e=>document.querySelectorAll(`[${y}="${e}"]`).length>0,h=e=>new Promise((t=>{if(o())return t(!0);function o(){if(g(e))return!0;try{return""!==window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${e}`).trim()}catch{return!1}}setTimeout((()=>{t(o())}),50)})),b=async e=>{const{id:t,cssautoload:o=!0,csspath:n="",debug:r=!1}=e;if(!1===o||!1===n)return;if(g(t))return void(r&&console.log(`[${t}] CSS already loaded, skipping`));const i=[];"string"==typeof n&&""!==n.trim()&&i.push(n);const l=p(t);if(l){const e=`${l}${t}.css`;i.push(e)}const s=`plugin/${t}/${t}.css`;i.push(s);for(const e of i)try{await f(t,e);let o="CSS";return o=n&&e===n?"user-specified CSS":l&&e===`${l}${t}.css`?"CSS (auto-detected from script location)":"CSS (standard fallback)",void(r&&console.log(`[${t}] ${o} loaded successfully from: ${e}`))}catch{r&&console.log(`[${t}] Failed to load CSS from: ${e}`)}console.warn(`[${t}] Could not load CSS from any location`)};async function m(e,t){if("getEnvironmentInfo"in e&&t){const o=e,n=o.getEnvironmentInfo();return await h(o.pluginId)?void(t.debug&&console.log(`[${o.pluginId}] CSS already imported, skipping`)):("cssautoload"in o.userConfig?t.cssautoload:!n.isBundlerEnvironment)?b({id:o.pluginId,cssautoload:!0,csspath:t.csspath,debug:t.debug}):void(n.isBundlerEnvironment&&console.warn(`[${o.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`))}return b(e)}class v{constructor(){a(this,"debugMode",!1),a(this,"label","DEBUG"),a(this,"groupDepth",0),a(this,"group",((...e)=>{this.debugLog("group",...e),this.groupDepth++})),a(this,"groupCollapsed",((...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++})),a(this,"groupEnd",(()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))})),a(this,"error",((...e)=>{const t=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=t})),a(this,"table",((e,t,o)=>{if(this.debugMode)try{"string"==typeof e&&void 0!==t&&"string"!=typeof t?(0===this.groupDepth?console.log(`[${this.label}]: ${e}`):console.log(e),o?console.table(t,o):console.table(t)):(0===this.groupDepth&&console.log(`[${this.label}]: Table data`),"object"==typeof t&&Array.isArray(t)?console.table(e,t):console.table(e))}catch(t){console.error(`[${this.label}]: Error showing table:`,t),console.log(`[${this.label}]: Raw data:`,e)}})),a(this,"formatAndLog",((e,t)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...t):t.length>0&&"string"==typeof t[0]?e.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):e.call(console,`[${this.label}]:`,...t)}catch(e){console.error(`[${this.label}]: Error in logging:`,e),console.log(`[${this.label}]: Original log data:`,...t)}}))}initialize(e,t="DEBUG"){this.debugMode=e,this.label=t}debugLog(e,...t){const o=console[e];if(!this.debugMode&&"error"!==e||"function"!=typeof o)return;const n=o;"group"!==e&&"groupCollapsed"!==e?"groupEnd"!==e?"table"!==e?this.groupDepth>0?n.call(console,...t):t.length>0&&"string"==typeof t[0]?n.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):n.call(console,`[${this.label}]:`,...t):1===t.length?this.table(t[0]):2===t.length?(t[0],this.table(t[0],t[1])):t.length>=3&&this.table(t[0],t[1],t[2]):n.call(console):t.length>0&&"string"==typeof t[0]?n.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):n.call(console,`[${this.label}]:`,...t)}}const C=(L=new v,new Proxy(L,{get:(e,t)=>{if(t in e)return e[t];const o=t.toString();return"function"==typeof console[o]?(...t)=>{e.debugLog(o,...t)}:void 0}})),S=(e,o)=>{const n=(e,t)=>void 0!==e&&(""!==e||"0"!==String(t))&&String(e)!==String(t);n(o.style.copybg,t.style.copybg)&&e.style.setProperty("--cc-copy-bg",o.style.copybg),n(o.style.copiedbg,t.style.copiedbg)&&e.style.setProperty("--cc-copied-bg",o.style.copiedbg),n(o.style.copycolor,t.style.copycolor)&&e.style.setProperty("--cc-copy-color",o.style.copycolor),n(o.style.copiedcolor,t.style.copiedcolor)&&e.style.setProperty("--cc-copied-color",o.style.copiedcolor),n(o.style.scale,t.style.scale)&&e.style.setProperty("--cc-scale",String(o.style.scale)),n(o.style.offset,t.style.offset)&&e.style.setProperty("--cc-offset",String(o.style.offset)),n(o.style.radius,t.style.radius)&&e.style.setProperty("--cc-radius",String(o.style.radius)),n(o.style.copyborder,t.style.copyborder)&&""!==o.style.copyborder&&e.style.setProperty("--cc-copyborder",o.style.copyborder),n(o.style.copiedborder,t.style.copiedborder)&&""!==o.style.copiedborder&&e.style.setProperty("--cc-copiedborder",o.style.copiedborder)},w={copy:'<svg aria-hidden="true" height="16" width="16" viewBox="0 0 16 16" version="1.1"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg>',copied:'<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"><path d="M15.7,2.8c0.4,0.4,0.4,1,0,1.4L6,13.9c-0.4,0.4-1,0.4-1.4,0L0.3,9.6c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l3.6,3.6l9-9C14.7,2.4,15.3,2.4,15.7,2.8z"/></svg>'},x=(e,t)=>{var o,n,r;const i=null!=(o=t.iconsvg)&&o.copy&&""!==t.iconsvg.copy?t.iconsvg.copy:w.copy,l=null!=(n=t.iconsvg)&&n.copied&&""!==t.iconsvg.copied?t.iconsvg.copied:w.copied,s=e.dataset.ccDisplay||t.display;"icons"===s||"both"===s?(e.innerHTML="<span></span>",e.textholder=e.querySelector("span"),e.insertAdjacentHTML("afterbegin",l),e.insertAdjacentHTML("afterbegin",i),"icons"===e.dataset.ccDisplay&&t.tooltip&&(e.textholder.style.display="flex")):(e.innerHTML="<span></span>",e.textholder=e.querySelector("span")),e.textholder&&(e.textholder.textContent=e.dataset.ccCopy?e.dataset.ccCopy:(null==(r=t.text)?void 0:r.copy)||"Copy")},$=async(e,t)=>{if(t.plaintextonly){let t;const o=e.querySelector("table.hljs-ln");t=o?Array.from(o.querySelectorAll("td.hljs-ln-code")).map((e=>e.textContent)).join("\n"):e.innerText.replace(/^\s+|\s+$/g,""),await navigator.clipboard.writeText(t)}else try{const t=e.cloneNode(!0);let o;const n=t.querySelector("table.hljs-ln");if(n){const e=n.querySelectorAll("td.hljs-ln-numbers");for(const t of e)t.style.display="none";o=Array.from(n.querySelectorAll("td.hljs-ln-code")).map((e=>e.textContent)).join("\n")}else o=t.innerText;const r=`\n\t\t\t\t<style>${Array.from(document.styleSheets).flatMap((e=>{try{return Array.from(e.cssRules)}catch{return[]}})).filter((e=>e.cssText.includes(".hljs")||e.cssText.includes("pre code")||e.cssText.includes("code[class")||e.cssText.includes(".language-")||e.cssText.includes("pre")||e.cssText.includes("code"))).map((e=>e.cssText)).join("\n")}pre, code, .hljs, .hljs-ln-code { white-space: pre !important; font-family: monospace !important;}</style>\n\t\t\t\t<div>${t.outerHTML}</div>\n\t\t\t`,i=new Blob([r],{type:"text/html"}),l=new Blob([o],{type:"text/plain"}),s=new ClipboardItem({"text/html":i,"text/plain":l});await navigator.clipboard.write([s])}catch(t){console.error("Rich text clipboard error:",t),await navigator.clipboard.writeText(e.innerText)}},T=(e,t)=>{const o=e.querySelectorAll(".codeblock > button:not(.code-copy-button)");for(const e of o)e.addEventListener("click",(async()=>{const o=e,n=o.nextElementSibling;if(!(n&&n instanceof HTMLElement))return;const r=n.querySelector("code");if(r&&r instanceof HTMLElement)try{await $(r,t),j(o,t)}catch(e){C.error("Error copying code:",e)}else C.error("Could not find code element")}))},j=(e,t)=>{e.textholder&&(e.dataset.textOriginal=e.textholder.innerHTML,e.textholder.innerHTML=e.dataset.ccCopied||t.text.copied),e.setAttribute("disabled","true"),setTimeout((()=>{e.textholder&&("icons"!==e.dataset.ccDisplay||!e.dataset.ccDisplay)&&(e.textholder.innerHTML=e.dataset.textOriginal||""),delete e.dataset.textOriginal,e.removeAttribute("disabled")}),t.timeout)},M=async(e,t,o)=>{var n;const r=t.getRevealElement(),i='pre:not([data-cc="false"]) > code',l=document.querySelector("[name=generator]"),s=(null==(n=null==l?void 0:l.getAttribute("content"))?void 0:n.includes("quarto"))??!1;let c=[];if(r&&(S(r,o),c=Array.from(r.querySelectorAll(i)).map((e=>e.parentElement)).filter((e=>e instanceof HTMLPreElement))),c.length>0&&r){C.log(`${c.length} code blocks found`,c);for(const e of c){let t=null,n=null;const r=e.parentElement;if(s&&null!=r&&r.matches(".sourceCode")?(t=r,n=t,r.dataset.did="quartoblock"):(n=e,null!=r&&r.classList.contains("codeblock")||(t=document.createElement("div"),null==r||r.insertBefore(t,e))),t&&n){t.classList.add("codeblock"),t.appendChild(e),("icon"===o.display||"icons"===o.display||"both"===o.display)&&n&&(n.dataset.ccDisplay=o.display),e.classList.contains("fragment")&&(t.classList.add("fragment"),e.classList.remove("fragment"));const r=document.createElement("button");r.dataset.cc="true",r.title="Copy to Clipboard","always"!==o.button&&(r.dataset.cc=o.button);const i=["cc","ccCopy","ccCopied","ccDisplay"];for(const e of i)n.dataset[e]&&(r.dataset[e]=n.dataset[e],delete n.dataset[e]);const l=e.querySelectorAll("code")[0];null!=l&&l.innerText&&(x(r,o),t.insertBefore(r,e))}}T(r,o)}},A="copycode",E=async(e,t,o)=>{C&&o.debug&&C.initialize(!0,A),await m(e,o),await M(e,t,o)};var L;return()=>new u(A,E,t).createInterface()}());export{o as default};
